<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lihua.system.mapper.SysDeptMapper">

    <select id="deptUserCount" resultType="java.lang.Long">
        select count(1) from sys_user_dept where dept_id in
        <foreach collection="ids" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </select>

    <select id="selectByUserId" resultType="com.lihua.model.security.CurrentDept">
        SELECT
            id,
            parent_id,
            name,
            code,
            sort,
            manager,
            phone_number,
            email,
            fax,
            sys_user_dept.default_dept
            FROM
            sys_dept
        INNER JOIN sys_user_dept ON sys_user_dept.dept_id = sys_dept.id
        WHERE
        user_id = #{userId} AND del_flag = '0' AND status = '0'
    </select>
</mapper>